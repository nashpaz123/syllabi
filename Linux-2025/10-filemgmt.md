# פעולות עם קבצים בלינוקס - מדריך מקיף

## מערכת הקבצים בלינוקס

### המבנה ההיררכי
בלינוקס, הכל מתחיל מתיקיית השורש (/). הנה התיקיות העיקריות:
- `/bin`: קבצים בינאריים (תוכניות) בסיסיים
- `/boot`: קבצי אתחול המערכת
- `/dev`: קבצי התקנים
- `/etc`: קבצי הגדרות
- `/home`: תיקיות הבית של המשתמשים
- `/lib`: ספריות משותפות
- `/media`: נקודות עיגון להתקנים נשלפים
- `/mnt`: נקודות עיגון זמניות
- `/opt`: חבילות תוכנה אופציונליות
- `/proc`: מידע על תהליכים ומערכת
- `/root`: תיקיית הבית של מנהל המערכת
- `/sbin`: כלי ניהול מערכת
- `/tmp`: קבצים זמניים
- `/usr`: תוכניות ונתונים
- `/var`: קבצים משתנים (לוגים וכו')

### סוגי קבצים
בלינוקס יש כמה סוגי קבצים:
- `-`: קובץ רגיל
- `d`: תיקייה
- `l`: קישור סימבולי
- `b`: קובץ התקן בלוק
- `c`: קובץ התקן תווים
- `s`: שקע (socket)
- `p`: צינור (pipe)

## פקודות בסיסיות לעבודה עם קבצים

### הצגת קבצים ותיקיות
```bash
# הצגה בסיסית
ls

# הצגה מפורטת
ls -l

# הצגת קבצים נסתרים
ls -a

# הצגת גדלים בפורמט קריא
ls -lh

# מיון לפי זמן
ls -lt

# מיון לפי גודל
ls -lS

# הצגה רקורסיבית
ls -R
```

### יצירת קבצים ותיקיות
```bash
# יצירת קובץ ריק
touch file.txt

# יצירת תיקייה
mkdir folder

# יצירת מספר תיקיות
mkdir -p folder1/folder2/folder3

# יצירת קובץ עם תוכן
echo "תוכן" > file.txt
```

### העתקת קבצים
```bash
# העתקת קובץ בודד
cp source.txt destination.txt

# העתקת תיקייה
cp -r source_dir destination_dir

# העתקה עם שמירה על הרשאות
cp -p file.txt backup/

# העתקה אינטראקטיבית
cp -i file.txt destination/
```

### העברת קבצים
```bash
# העברת קובץ
mv old_name.txt new_name.txt

# העברת תיקייה
mv folder1 folder2

# העברה אינטראקטיבית
mv -i file.txt destination/
```

### מחיקת קבצים
```bash
# מחיקת קובץ
rm file.txt

# מחיקת תיקייה ריקה
rmdir empty_dir

# מחיקת תיקייה מלאה
rm -r full_dir

# מחיקה אינטראקטיבית
rm -i file.txt
```

## הרשאות קבצים

### הבנת הרשאות
הרשאות מוצגות בפורמט: `rwxrwxrwx`
- `r`: הרשאת קריאה (4)
- `w`: הרשאת כתיבה (2)
- `x`: הרשאת הרצה (1)

שלוש קבוצות של הרשאות:
1. בעלים
2. קבוצה
3. אחרים

### שינוי הרשאות
```bash
# שינוי בפורמט אוקטלי
chmod 755 file.txt

# שינוי בפורמט סימבולי
chmod u+x file.txt  # הוספת הרשאת הרצה לבעלים
chmod g-w file.txt  # הסרת הרשאת כתיבה מהקבוצה
chmod o=r file.txt  # קביעת הרשאת קריאה בלבד לאחרים
```

### שינוי בעלות
```bash
# שינוי בעלים
chown user1 file.txt

# שינוי קבוצה
chgrp group1 file.txt

# שינוי בעלים וקבוצה
chown user1:group1 file.txt
```

## קישורים בלינוקס

### קישורים קשים
```bash
# יצירת קישור קשה
ln target_file link_name
```
מאפיינים:
- חייבים להיות באותה מערכת קבצים
- מונה קישורים מתעדכן
- לא ניתן ליצור לתיקיות

### קישורים סימבוליים
```bash
# יצירת קישור סימבולי
ln -s target_file link_name
```
מאפיינים:
- יכולים להצביע לכל מקום
- נשברים אם המטרה נמחקת
- יכולים להצביע לתיקיות

## חיפוש קבצים

### שימוש ב-find
```bash
# חיפוש לפי שם
find . -name "*.txt"

# חיפוש לפי גודל
find . -size +1M

# חיפוש לפי זמן שינוי
find . -mtime -7

# חיפוש והפעלת פקודה
find . -name "*.log" -exec rm {} \;
```

### שימוש ב-locate
```bash
# חיפוש מהיר בבסיס נתונים
locate filename

# עדכון בסיס הנתונים
sudo updatedb
```

### חיפוש בתוך קבצים עם grep
```bash
# חיפוש טקסט בקובץ
grep "מילה" file.txt

# חיפוש רקורסיבי
grep -r "מילה" .

# חיפוש עם הקשר
grep -C 2 "מילה" file.txt

# התעלמות מרישיות
grep -i "מילה" file.txt
```

## טיפים מתקדמים

### שימוש ב-dd
```bash
# יצירת גיבוי של דיסק
dd if=/dev/sda of=backup.img

# יצירת קובץ בגודל מסוים
dd if=/dev/zero of=bigfile bs=1M count=100
```

### עבודה עם דחיסה
```bash
# דחיסת קובץ
gzip file.txt

# דחיסת תיקייה
tar -czf archive.tar.gz directory/

# חילוץ מארכיון
tar -xzf archive.tar.gz
```

### ניטור שימוש בדיסק
```bash
# הצגת שימוש בדיסק
df -h

# הצגת גודל תיקיות
du -sh *
```

## פתרון בעיות נפוצות

### קבצים נעולים
1. בדיקה מי משתמש בקובץ:
```bash
lsof | grep filename
```
2. שחרור נעילה:
```bash
fuser -k filename
```

### שחזור קבצים שנמחקו
1. בדיקה אם הקובץ עדיין פתוח:
```bash
lsof | grep deleted
```
2. שימוש בכלי שחזור כמו testdisk

### בעיות הרשאות
1. בדיקת הרשאות נוכחיות:
```bash
ls -l filename
```
2. תיקון הרשאות:
```bash
chmod 644 filename
```
